pipeline {
    agent any
    stages {
        stage('Build') {
            steps {
                sh 'echo "Building..."'
            }
        }
    }
    post {
        always {
            script {
                // 设置webhook URL和自定义的payload
                def webhookUrl = 'https://balanced-poorly-shiner.ngrok-free.app/generic-webhook-trigger/invoke?token=your-token'
                def payload = '{"message": "Custom message"}'

                // 使用curl发送POST请求
                sh "curl -X POST -H 'Content-Type: application/json' -d '${payload}' ${webhookUrl}"
            }
        }
    }
}
